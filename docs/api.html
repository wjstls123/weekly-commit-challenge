<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Commit Challenge API</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .content {
            padding: 30px;
        }
        .api-endpoint {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .api-url {
            background: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
            word-break: break-all;
            margin: 10px 0;
        }
        .badge-demo {
            display: inline-block;
            margin: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .usage-example {
            background: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 15px;
            margin: 15px 0;
        }
        .code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š Weekly Commit Challenge API</h1>
            <p>GitHub Pagesë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ë°°ì§€ ë° ë°ì´í„° API</p>
        </div>
        
        <div class="content">
            <h2>ğŸ¯ API ì—”ë“œí¬ì¸íŠ¸</h2>
            
            <div class="api-endpoint">
                <h3>1. JSON ë°ì´í„° API</h3>
                <p>ì‚¬ìš©ìì˜ ìµœì‹  ì£¼ê°„ ì»¤ë°‹ ê¸°ë¡ì„ JSON í˜•íƒœë¡œ ì œê³µ</p>
                <div class="api-url" id="json-api-url">
                    https://{username}.github.io/weekly-commit-challange/api/data.json
                </div>
                <button onclick="copyToClipboard('json-api-url')">ğŸ“‹ ë³µì‚¬</button>
            </div>

            <div class="api-endpoint">
                <h3>2. ë°°ì§€ ì´ë¯¸ì§€ API</h3>
                <p>ì‹¤ì‹œê°„ ì»¤ë°‹ ìƒíƒœë¥¼ SVG ë°°ì§€ë¡œ ì œê³µ</p>
                <div class="api-url" id="badge-api-url">
                    https://{username}.github.io/weekly-commit-challange/api/badge.svg
                </div>
                <button onclick="copyToClipboard('badge-api-url')">ğŸ“‹ ë³µì‚¬</button>
                
                <div class="badge-demo">
                    <h4>ë°°ì§€ ì˜ˆì‹œ:</h4>
                    <img id="demo-badge" src="data:image/svg+xml;base64," alt="Weekly Commit Badge">
                </div>
            </div>

            <div class="api-endpoint">
                <h3>3. ì„ë² ë“œ ìœ„ì ¯ API</h3>
                <p>ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì— ì„ë² ë“œí•  ìˆ˜ ìˆëŠ” HTML ìœ„ì ¯</p>
                <div class="api-url" id="widget-api-url">
                    https://{username}.github.io/weekly-commit-challange/api/widget.html
                </div>
                <button onclick="copyToClipboard('widget-api-url')">ğŸ“‹ ë³µì‚¬</button>
            </div>

            <h2>ğŸ“– ì‚¬ìš© ë°©ë²•</h2>
            
            <div class="usage-example">
                <h3>README.mdì— ë°°ì§€ ì¶”ê°€:</h3>
                <div class="code">![Weekly Commit Challenge](https://YOUR_USERNAME.github.io/weekly-commit-challange/api/badge.svg)</div>
            </div>

            <div class="usage-example">
                <h3>HTMLì—ì„œ ì‚¬ìš©:</h3>
                <div class="code">&lt;img src="https://YOUR_USERNAME.github.io/weekly-commit-challange/api/badge.svg" alt="Weekly Commit Badge"&gt;</div>
            </div>

            <div class="usage-example">
                <h3>JavaScriptë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°:</h3>
                <div class="code">fetch('https://YOUR_USERNAME.github.io/weekly-commit-challange/api/data.json')
  .then(response => response.json())
  .then(data => {
    console.log('ì£¼ê°„ ì»¤ë°‹:', data.commitCount);
    console.log('ì„±ê³µ ì—¬ë¶€:', data.success);
  });</div>
            </div>

            <h2>ğŸ”§ ì„¤ì • ë°©ë²•</h2>
            <ol>
                <li>GitHub Pages í™œì„±í™” (Settings â†’ Pages â†’ Source: Deploy from a branch)</li>
                <li>ì›Œí¬í”Œë¡œìš°ê°€ record.md íŒŒì¼ ìƒì„±/ì—…ë°ì´íŠ¸</li>
                <li>JavaScriptê°€ record.mdì—ì„œ JSON ì¶”ì¶œí•˜ì—¬ API íŒŒì¼ ìƒì„±</li>
                <li>ì‹¤ì‹œê°„ìœ¼ë¡œ ë°°ì§€ì™€ ë°ì´í„° ì œê³µ</li>
            </ol>

            <div id="current-data" style="display: none;">
                <h2>ğŸ“Š í˜„ì¬ ë°ì´í„°</h2>
                <div id="data-display"></div>
            </div>
        </div>
    </div>

    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ì‚¬ìš©ìì˜ ë°ì´í„° ë¡œë“œ ì‹œë„
        async function loadCurrentData() {
            try {
                // record.mdì—ì„œ JSON ë°ì´í„° ì¶”ì¶œ
                const response = await fetch('../record.md');
                const text = await response.text();
                
                // JSON ë¸”ë¡ ì¶”ì¶œ
                const jsonMatch = text.match(/```json\n([\s\S]*?)\n```/);
                if (jsonMatch) {
                    const data = JSON.parse(jsonMatch[1]);
                    
                    // í˜„ì¬ ë°ì´í„° í‘œì‹œ
                    document.getElementById('current-data').style.display = 'block';
                    document.getElementById('data-display').innerHTML = `
                        <div class="api-endpoint">
                            <h4>ğŸ“… ${data.period}</h4>
                            <p><strong>ì£¼ì°¨:</strong> ${data.year}ë…„ ${data.weekNumber}ì£¼ì°¨</p>
                            <p><strong>ì»¤ë°‹ ìˆ˜:</strong> ${data.commitCount}ê°œ</p>
                            <p><strong>ìƒíƒœ:</strong> ${data.status}</p>
                            <p><strong>ì„±ê³µ ì—¬ë¶€:</strong> ${data.success ? 'âœ… ì„±ê³µ' : 'âŒ ì§„í–‰ì¤‘'}</p>
                            <p><strong>ì—…ë°ì´íŠ¸:</strong> ${new Date(data.lastUpdated).toLocaleString('ko-KR')}</p>
                        </div>
                    `;
                    
                    // ë°°ì§€ ìƒì„± ë° í‘œì‹œ
                    generateBadge(data);
                }
            } catch (error) {
                console.log('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // ë°°ì§€ SVG ìƒì„±
        function generateBadge(data) {
            const status = data.success ? 'ì„±ê³µ' : 'ì§„í–‰ì¤‘';
            const color = data.success ? '#4c1' : '#fe7d37';
            const commitText = `${data.commitCount}ê°œ ì»¤ë°‹`;
            
            const svg = `
                <svg xmlns="http://www.w3.org/2000/svg" width="180" height="20">
                    <linearGradient id="b" x2="0" y2="100%">
                        <stop offset="0" stop-color="#bbb" stop-opacity=".1"/>
                        <stop offset="1" stop-opacity=".1"/>
                    </linearGradient>
                    <mask id="a">
                        <rect width="180" height="20" rx="3" fill="#fff"/>
                    </mask>
                    <g mask="url(#a)">
                        <path fill="#555" d="M0 0h90v20H0z"/>
                        <path fill="${color}" d="M90 0h90v20H90z"/>
                        <path fill="url(#b)" d="M0 0h180v20H0z"/>
                    </g>
                    <g fill="#fff" text-anchor="middle" font-family="DejaVu Sans,Verdana,Geneva,sans-serif" font-size="11">
                        <text x="45" y="15" fill="#010101" fill-opacity=".3">${data.weekNumber}ì£¼ì°¨</text>
                        <text x="45" y="14">${data.weekNumber}ì£¼ì°¨</text>
                        <text x="135" y="15" fill="#010101" fill-opacity=".3">${status}</text>
                        <text x="135" y="14">${status}</text>
                    </g>
                </svg>
            `;
            
            const base64 = btoa(unescape(encodeURIComponent(svg)));
            document.getElementById('demo-badge').src = `data:image/svg+xml;base64,${base64}`;
        }

        // í´ë¦½ë³´ë“œ ë³µì‚¬
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        loadCurrentData();
    </script>
</body>
</html>